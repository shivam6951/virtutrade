{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Plus,TrendingUp,TrendingDown,Heart,Search,X}from'lucide-react';import api from'../utils/api';import BuyModal from'../components/BuyModal';import SellModal from'../components/SellModal';import SearchBar from'../components/SearchBar';import useAutoRefresh from'../hooks/useAutoRefresh';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Watchlist=()=>{const[watchlist,setWatchlist]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[showAddModal,setShowAddModal]=useState(false);const[newStock,setNewStock]=useState({symbol:'',name:''});const[selectedStock,setSelectedStock]=useState(null);const[showBuyModal,setShowBuyModal]=useState(false);const[showSellModal,setShowSellModal]=useState(false);const[userHoldings,setUserHoldings]=useState([]);const token=localStorage.getItem('token');const fetchWatchlist=async()=>{try{const response=await api.getWatchlist(token);const data=await response.json();setWatchlist(data);}catch(error){console.error('Error fetching watchlist:',error);}finally{setLoading(false);}};const fetchUserHoldings=async()=>{try{const response=await api.getPortfolio(token);const data=await response.json();setUserHoldings(data.holdings||[]);}catch(error){console.error('Error fetching holdings:',error);}};useEffect(()=>{fetchWatchlist();fetchUserHoldings();},[]);// Auto-refresh every 30 seconds\nuseAutoRefresh(()=>{fetchWatchlist();fetchUserHoldings();},30000);const removeFromWatchlist=async symbol=>{try{const response=await api.removeFromWatchlist(token,symbol);if(response.ok){fetchWatchlist();}}catch(error){console.error('Error removing from watchlist:',error);}};const addStockToWatchlist=async stock=>{try{console.log('Adding to watchlist:',stock);console.log('API URL:',\"http://localhost:3002/api/watchlist\");console.log('Token:',token?'Present':'Missing');const response=await fetch('http://localhost:3002/api/watchlist',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({symbol:stock.symbol,assetName:stock.name})});console.log('Response status:',response.status);if(response.ok){const data=await response.json();console.log('Successfully added to watchlist:',data);await fetchWatchlist();alert(\"\".concat(stock.symbol,\" added to watchlist!\"));return true;}else{const errorData=await response.json();console.error('Failed to add to watchlist:',errorData);alert(\"Failed to add \".concat(stock.symbol,\": \").concat(errorData.error||'Unknown error'));return false;}}catch(error){console.error('Network error adding to watchlist:',error);alert(\"Network error: \".concat(error.message));return false;}};const filteredWatchlist=watchlist.filter(stock=>stock.asset_symbol.toLowerCase().includes(searchTerm.toLowerCase())||stock.asset_name.toLowerCase().includes(searchTerm.toLowerCase()));const WatchlistCard=_ref=>{let{stock}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-2xl p-6 shadow-sm border border-white/20 dark:border-gray-700/20 hover:shadow-md transition-shadow cursor-pointer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 dark:text-white\",children:stock.asset_symbol}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();removeFromWatchlist(stock.asset_symbol);},className:\"p-1 hover:bg-red-50 rounded-full transition-colors\",title:\"Remove from watchlist\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4 text-red-500\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300 mb-3\",children:stock.asset_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-gray-900 dark:text-white\",children:[\"\\u20B9\",Number(stock.currentPrice||0).toFixed(2)]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(stock.change>0?'text-green-700 dark:text-green-400':'text-red-700 dark:text-red-400'),children:[stock.change>0?/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4 mr-1\"}):/*#__PURE__*/_jsx(TrendingDown,{className:\"h-4 w-4 mr-1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-bold\",children:[(stock.change||0)>0?'+':'',\"\\u20B9\",Math.abs(stock.change||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs font-medium\",children:[\"(\",(stock.changePercentage||0)>0?'+':'',Number(stock.changePercentage||0).toFixed(2),\"% \",stock.change>0?'↑ Up':'↓ Down',\")\"]})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();setSelectedStock({symbol:stock.asset_symbol,name:stock.asset_name||stock.asset_symbol,currentPrice:stock.currentPrice,type:stock.asset_type||'Stock'});setShowBuyModal(true);},className:\"flex-1 bg-green-600 hover:bg-green-700 text-white text-sm py-2 px-4 rounded-lg font-medium transition-all duration-200 hover:scale-105\",children:\"Buy\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();const holding=userHoldings.find(h=>h.asset_symbol===stock.asset_symbol);if(holding){setSelectedStock({symbol:stock.asset_symbol,name:stock.asset_name||stock.asset_symbol,currentPrice:stock.currentPrice,type:stock.asset_type||'Stock'});setShowSellModal(true);}else{alert('You don\\'t own this stock');}},className:\"flex-1 bg-red-600 hover:bg-red-700 text-white text-sm py-2 px-4 rounded-lg font-medium transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\",disabled:!userHoldings.find(h=>h.asset_symbol===stock.asset_symbol),children:\"Sell\"})]})]});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:\"Watchlist\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300\",children:\"Keep track of your favorite stocks and investments\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddModal(true),className:\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4 mr-2\"}),\"Add Stock\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-2xl p-6 shadow-sm border border-white/20 dark:border-gray-700/20\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 flex items-center pl-3\",children:/*#__PURE__*/_jsx(Search,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search stocks in your watchlist...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"block w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white py-2 pl-10 pr-3 text-sm placeholder-gray-500 dark:placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:filteredWatchlist.map(stock=>/*#__PURE__*/_jsx(WatchlistCard,{stock:stock},stock.id))}),filteredWatchlist.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Heart,{className:\"h-12 w-12 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400 text-lg\",children:\"No stocks in your watchlist\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 dark:text-gray-500\",children:\"Add some stocks to get started!\"})]}),showAddModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center min-h-screen px-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-75\",onClick:()=>setShowAddModal(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-4\",children:\"Add to Watchlist\"}),/*#__PURE__*/_jsx(SearchBar,{onStockSelect:async stock=>{console.log('Stock selected from search:',stock);const success=await addStockToWatchlist(stock);if(success){setShowAddModal(false);}},onBuyStock:async stock=>{console.log('Buy clicked from search:',stock);const success=await addStockToWatchlist(stock);if(success){setShowAddModal(false);}},placeholder:\"Search stocks, ETFs, mutual funds to add...\",showInModal:true}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddModal(false),className:\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600\",children:\"Cancel\"})})]})]})}),showBuyModal&&selectedStock&&/*#__PURE__*/_jsx(BuyModal,{stock:selectedStock,onClose:()=>{setShowBuyModal(false);setSelectedStock(null);},onSuccess:()=>{fetchWatchlist();fetchUserHoldings();}}),showSellModal&&selectedStock&&/*#__PURE__*/_jsx(SellModal,{stock:selectedStock,holding:userHoldings.find(h=>h.asset_symbol===selectedStock.asset_symbol),onClose:()=>{setShowSellModal(false);setSelectedStock(null);},onSuccess:()=>{fetchWatchlist();fetchUserHoldings();}})]});};export default Watchlist;","map":{"version":3,"names":["React","useState","useEffect","Plus","TrendingUp","TrendingDown","Heart","Search","X","api","BuyModal","SellModal","SearchBar","useAutoRefresh","jsx","_jsx","jsxs","_jsxs","Watchlist","watchlist","setWatchlist","loading","setLoading","searchTerm","setSearchTerm","showAddModal","setShowAddModal","newStock","setNewStock","symbol","name","selectedStock","setSelectedStock","showBuyModal","setShowBuyModal","showSellModal","setShowSellModal","userHoldings","setUserHoldings","token","localStorage","getItem","fetchWatchlist","response","getWatchlist","data","json","error","console","fetchUserHoldings","getPortfolio","holdings","removeFromWatchlist","ok","addStockToWatchlist","stock","log","fetch","method","headers","concat","body","JSON","stringify","assetName","status","alert","errorData","message","filteredWatchlist","filter","asset_symbol","toLowerCase","includes","asset_name","WatchlistCard","_ref","className","children","onClick","e","stopPropagation","title","Number","currentPrice","toFixed","change","Math","abs","changePercentage","type","asset_type","holding","find","h","disabled","placeholder","value","onChange","target","map","id","length","onStockSelect","success","onBuyStock","showInModal","onClose","onSuccess"],"sources":["C:/Users/SHIVAM/OneDrive/Desktop/VirtuTrade/frontend/src/pages/Watchlist.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Plus, TrendingUp, TrendingDown, Heart, Search, X } from 'lucide-react';\nimport api from '../utils/api';\nimport BuyModal from '../components/BuyModal';\nimport SellModal from '../components/SellModal';\nimport SearchBar from '../components/SearchBar';\nimport useAutoRefresh from '../hooks/useAutoRefresh';\n\nconst Watchlist = () => {\n  const [watchlist, setWatchlist] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [newStock, setNewStock] = useState({ symbol: '', name: '' });\n  const [selectedStock, setSelectedStock] = useState(null);\n  const [showBuyModal, setShowBuyModal] = useState(false);\n  const [showSellModal, setShowSellModal] = useState(false);\n  const [userHoldings, setUserHoldings] = useState([]);\n  const token = localStorage.getItem('token');\n\n  const fetchWatchlist = async () => {\n    try {\n      const response = await api.getWatchlist(token);\n      const data = await response.json();\n      setWatchlist(data);\n    } catch (error) {\n      console.error('Error fetching watchlist:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchUserHoldings = async () => {\n    try {\n      const response = await api.getPortfolio(token);\n      const data = await response.json();\n      setUserHoldings(data.holdings || []);\n    } catch (error) {\n      console.error('Error fetching holdings:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchWatchlist();\n    fetchUserHoldings();\n  }, []);\n\n  // Auto-refresh every 30 seconds\n  useAutoRefresh(() => {\n    fetchWatchlist();\n    fetchUserHoldings();\n  }, 30000);\n\n  const removeFromWatchlist = async (symbol) => {\n    try {\n      const response = await api.removeFromWatchlist(token, symbol);\n      if (response.ok) {\n        fetchWatchlist();\n      }\n    } catch (error) {\n      console.error('Error removing from watchlist:', error);\n    }\n  };\n\n  const addStockToWatchlist = async (stock) => {\n    try {\n      console.log('Adding to watchlist:', stock);\n      console.log('API URL:', `http://localhost:3002/api/watchlist`);\n      console.log('Token:', token ? 'Present' : 'Missing');\n      \n      const response = await fetch('http://localhost:3002/api/watchlist', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          symbol: stock.symbol,\n          assetName: stock.name\n        })\n      });\n      \n      console.log('Response status:', response.status);\n      \n      if (response.ok) {\n        const data = await response.json();\n        console.log('Successfully added to watchlist:', data);\n        await fetchWatchlist();\n        alert(`${stock.symbol} added to watchlist!`);\n        return true;\n      } else {\n        const errorData = await response.json();\n        console.error('Failed to add to watchlist:', errorData);\n        alert(`Failed to add ${stock.symbol}: ${errorData.error || 'Unknown error'}`);\n        return false;\n      }\n    } catch (error) {\n      console.error('Network error adding to watchlist:', error);\n      alert(`Network error: ${error.message}`);\n      return false;\n    }\n  };\n\n  const filteredWatchlist = watchlist.filter(stock =>\n    stock.asset_symbol.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    stock.asset_name.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const WatchlistCard = ({ stock }) => (\n    <div className=\"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-2xl p-6 shadow-sm border border-white/20 dark:border-gray-700/20 hover:shadow-md transition-shadow cursor-pointer\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <h3 className=\"font-semibold text-gray-900 dark:text-white\">{stock.asset_symbol}</h3>\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                removeFromWatchlist(stock.asset_symbol);\n              }}\n              className=\"p-1 hover:bg-red-50 rounded-full transition-colors\"\n              title=\"Remove from watchlist\"\n            >\n              <X className=\"h-4 w-4 text-red-500\" />\n            </button>\n          </div>\n          <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-3\">{stock.asset_name}</p>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xl font-bold text-gray-900 dark:text-white\">₹{Number(stock.currentPrice || 0).toFixed(2)}</p>\n            </div>\n            <div className={`flex items-center ${stock.change > 0 ? 'text-green-700 dark:text-green-400' : 'text-red-700 dark:text-red-400'}`}>\n              {stock.change > 0 ? <TrendingUp className=\"h-4 w-4 mr-1\" /> : <TrendingDown className=\"h-4 w-4 mr-1\" />}\n              <div className=\"text-right\">\n                <p className=\"text-sm font-bold\">\n                  {(stock.change || 0) > 0 ? '+' : ''}₹{Math.abs(stock.change || 0).toFixed(2)}\n                </p>\n                <p className=\"text-xs font-medium\">\n                  ({(stock.changePercentage || 0) > 0 ? '+' : ''}{Number(stock.changePercentage || 0).toFixed(2)}% {stock.change > 0 ? '↑ Up' : '↓ Down'})\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"mt-4 flex space-x-2\">\n        <button \n          onClick={(e) => {\n            e.stopPropagation();\n            setSelectedStock({\n              symbol: stock.asset_symbol,\n              name: stock.asset_name || stock.asset_symbol,\n              currentPrice: stock.currentPrice,\n              type: stock.asset_type || 'Stock'\n            });\n            setShowBuyModal(true);\n          }}\n          className=\"flex-1 bg-green-600 hover:bg-green-700 text-white text-sm py-2 px-4 rounded-lg font-medium transition-all duration-200 hover:scale-105\"\n        >\n          Buy\n        </button>\n        <button \n          onClick={(e) => {\n            e.stopPropagation();\n            const holding = userHoldings.find(h => h.asset_symbol === stock.asset_symbol);\n            if (holding) {\n              setSelectedStock({\n                symbol: stock.asset_symbol,\n                name: stock.asset_name || stock.asset_symbol,\n                currentPrice: stock.currentPrice,\n                type: stock.asset_type || 'Stock'\n              });\n              setShowSellModal(true);\n            } else {\n              alert('You don\\'t own this stock');\n            }\n          }}\n          className=\"flex-1 bg-red-600 hover:bg-red-700 text-white text-sm py-2 px-4 rounded-lg font-medium transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n          disabled={!userHoldings.find(h => h.asset_symbol === stock.asset_symbol)}\n        >\n          Sell\n        </button>\n      </div>\n    </div>\n  );\n\n  if (loading) {\n    return <div className=\"flex justify-center items-center h-64\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Watchlist</h1>\n          <p className=\"text-gray-600 dark:text-gray-300\">Keep track of your favorite stocks and investments</p>\n        </div>\n        <button \n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n        >\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Add Stock\n        </button>\n      </div>\n\n      {/* Search Bar */}\n      <div className=\"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-2xl p-6 shadow-sm border border-white/20 dark:border-gray-700/20\">\n        <div className=\"relative\">\n          <div className=\"absolute inset-y-0 left-0 flex items-center pl-3\">\n            <Search className=\"h-5 w-5 text-gray-400\" />\n          </div>\n          <input\n            type=\"text\"\n            placeholder=\"Search stocks in your watchlist...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"block w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white py-2 pl-10 pr-3 text-sm placeholder-gray-500 dark:placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n          />\n        </div>\n      </div>\n\n      {/* Watchlist Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredWatchlist.map((stock) => (\n          <WatchlistCard key={stock.id} stock={stock} />\n        ))}\n      </div>\n\n      {filteredWatchlist.length === 0 && (\n        <div className=\"text-center py-12\">\n          <Heart className=\"h-12 w-12 text-gray-300 mx-auto mb-4\" />\n          <p className=\"text-gray-500 dark:text-gray-400 text-lg\">No stocks in your watchlist</p>\n          <p className=\"text-gray-400 dark:text-gray-500\">Add some stocks to get started!</p>\n        </div>\n      )}\n\n      {/* Add Stock Modal with Search */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n          <div className=\"flex items-center justify-center min-h-screen px-4\">\n            <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75\" onClick={() => setShowAddModal(false)} />\n            <div className=\"relative bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Add to Watchlist</h3>\n              <SearchBar \n                onStockSelect={async (stock) => {\n                  console.log('Stock selected from search:', stock);\n                  const success = await addStockToWatchlist(stock);\n                  if (success) {\n                    setShowAddModal(false);\n                  }\n                }}\n                onBuyStock={async (stock) => {\n                  console.log('Buy clicked from search:', stock);\n                  const success = await addStockToWatchlist(stock);\n                  if (success) {\n                    setShowAddModal(false);\n                  }\n                }}\n                placeholder=\"Search stocks, ETFs, mutual funds to add...\"\n                showInModal={true}\n              />\n              <div className=\"mt-4 flex justify-end\">\n                <button \n                  onClick={() => setShowAddModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Buy Modal */}\n      {showBuyModal && selectedStock && (\n        <BuyModal \n          stock={selectedStock}\n          onClose={() => {\n            setShowBuyModal(false);\n            setSelectedStock(null);\n          }}\n          onSuccess={() => {\n            fetchWatchlist();\n            fetchUserHoldings();\n          }}\n        />\n      )}\n\n      {/* Sell Modal */}\n      {showSellModal && selectedStock && (\n        <SellModal \n          stock={selectedStock}\n          holding={userHoldings.find(h => h.asset_symbol === selectedStock.asset_symbol)}\n          onClose={() => {\n            setShowSellModal(false);\n            setSelectedStock(null);\n          }}\n          onSuccess={() => {\n            fetchWatchlist();\n            fetchUserHoldings();\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Watchlist;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}