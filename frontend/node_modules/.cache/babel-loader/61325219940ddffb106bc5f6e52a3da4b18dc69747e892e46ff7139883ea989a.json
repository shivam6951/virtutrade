{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Search,TrendingUp,TrendingDown}from'lucide-react';import api from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchBar=_ref=>{let{onBuyStock}=_ref;const[query,setQuery]=useState('');const[results,setResults]=useState([]);const[showResults,setShowResults]=useState(false);const[loading,setLoading]=useState(false);const searchRef=useRef(null);const token=localStorage.getItem('token');useEffect(()=>{const handleClickOutside=event=>{if(searchRef.current&&!searchRef.current.contains(event.target)){setShowResults(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);useEffect(()=>{if(query.length>1){const timeoutId=setTimeout(()=>{searchStocks();},300);return()=>clearTimeout(timeoutId);}else{setResults([]);setShowResults(false);}},[query]);const searchStocks=async()=>{setLoading(true);try{const response=await api.searchStocks(token,query);const data=await response.json();setResults(data);setShowResults(true);}catch(error){console.error('Search error:',error);}finally{setLoading(false);}};const handleBuy=stock=>{onBuyStock(stock);setQuery('');setShowResults(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full max-w-lg\",ref:searchRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 flex items-center pl-4\",children:/*#__PURE__*/_jsx(Search,{className:\"h-5 w-5 text-gray-400 transition-colors duration-200\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full rounded-full border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 py-4 pl-12 pr-4 text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500/20 shadow-lg transition-all duration-300 hover:shadow-xl font-medium\",placeholder:\"Search stocks, ETFs, mutual funds...\",type:\"search\",value:query,onChange:e=>setQuery(e.target.value),onFocus:()=>query.length>1&&setShowResults(true)})]}),showResults&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute z-50 w-full mt-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-3xl shadow-2xl max-h-96 overflow-y-auto\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-gray-500\",children:\"Searching...\"}):results.length>0?results.map(stock=>/*#__PURE__*/_jsx(\"div\",{className:\"p-4 hover:bg-blue-50/50 dark:hover:bg-gray-700/50 border-b border-gray-100/50 dark:border-gray-700/50 last:border-b-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] mx-2 my-1 rounded-xl\",onClick:()=>handleBuy(stock),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-semibold text-sm\",children:stock.symbol.substring(0,2)})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:stock.symbol}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:stock.name}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full mt-1\",children:stock.type})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-gray-900\",children:[\"\\u20B9\",stock.currentPrice]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end \".concat(stock.change>0?'text-green-600':'text-red-600'),children:[stock.change>0?/*#__PURE__*/_jsx(TrendingUp,{className:\"h-3 w-3 mr-1\"}):/*#__PURE__*/_jsx(TrendingDown,{className:\"h-3 w-3 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs\",children:[stock.change>0?'+':'',\"\\u20B9\",Math.abs(stock.change),\" (\",stock.changePercentage,\"%)\"]})]})]})]})},stock.symbol)):/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-gray-500\",children:\"No results found\"})})]});};export default SearchBar;","map":{"version":3,"names":["React","useState","useEffect","useRef","Search","TrendingUp","TrendingDown","api","jsx","_jsx","jsxs","_jsxs","SearchBar","_ref","onBuyStock","query","setQuery","results","setResults","showResults","setShowResults","loading","setLoading","searchRef","token","localStorage","getItem","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","length","timeoutId","setTimeout","searchStocks","clearTimeout","response","data","json","error","console","handleBuy","stock","className","ref","children","placeholder","type","value","onChange","e","onFocus","map","onClick","symbol","substring","name","currentPrice","concat","change","Math","abs","changePercentage"],"sources":["c:/Users/SHIVAM/OneDrive/Desktop/VirtuTrade/frontend/src/components/SearchBar.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Search, TrendingUp, TrendingDown } from 'lucide-react';\nimport api from '../utils/api';\n\nconst SearchBar = ({ onBuyStock }) => {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const searchRef = useRef(null);\n  const token = localStorage.getItem('token');\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\n        setShowResults(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  useEffect(() => {\n    if (query.length > 1) {\n      const timeoutId = setTimeout(() => {\n        searchStocks();\n      }, 300);\n      return () => clearTimeout(timeoutId);\n    } else {\n      setResults([]);\n      setShowResults(false);\n    }\n  }, [query]);\n\n  const searchStocks = async () => {\n    setLoading(true);\n    try {\n      const response = await api.searchStocks(token, query);\n      const data = await response.json();\n      setResults(data);\n      setShowResults(true);\n    } catch (error) {\n      console.error('Search error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBuy = (stock) => {\n    onBuyStock(stock);\n    setQuery('');\n    setShowResults(false);\n  };\n\n  return (\n    <div className=\"relative w-full max-w-lg\" ref={searchRef}>\n      <div className=\"relative\">\n        <div className=\"absolute inset-y-0 left-0 flex items-center pl-4\">\n          <Search className=\"h-5 w-5 text-gray-400 transition-colors duration-200\" />\n        </div>\n        <input\n          className=\"block w-full rounded-full border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 py-4 pl-12 pr-4 text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500/20 shadow-lg transition-all duration-300 hover:shadow-xl font-medium\"\n          placeholder=\"Search stocks, ETFs, mutual funds...\"\n          type=\"search\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          onFocus={() => query.length > 1 && setShowResults(true)}\n        />\n      </div>\n\n      {/* Search Results Dropdown */}\n      {showResults && (\n        <div className=\"absolute z-50 w-full mt-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-3xl shadow-2xl max-h-96 overflow-y-auto\">\n          {loading ? (\n            <div className=\"p-4 text-center text-gray-500\">Searching...</div>\n          ) : results.length > 0 ? (\n            results.map((stock) => (\n              <div\n                key={stock.symbol}\n                className=\"p-4 hover:bg-blue-50/50 dark:hover:bg-gray-700/50 border-b border-gray-100/50 dark:border-gray-700/50 last:border-b-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] mx-2 my-1 rounded-xl\"\n                onClick={() => handleBuy(stock)}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                        <span className=\"text-blue-600 font-semibold text-sm\">\n                          {stock.symbol.substring(0, 2)}\n                        </span>\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{stock.symbol}</p>\n                        <p className=\"text-sm text-gray-600\">{stock.name}</p>\n                        <span className=\"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full mt-1\">\n                          {stock.type}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-semibold text-gray-900\">₹{stock.currentPrice}</p>\n                    <div className={`flex items-center justify-end ${stock.change > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                      {stock.change > 0 ? <TrendingUp className=\"h-3 w-3 mr-1\" /> : <TrendingDown className=\"h-3 w-3 mr-1\" />}\n                      <span className=\"text-xs\">\n                        {stock.change > 0 ? '+' : ''}₹{Math.abs(stock.change)} ({stock.changePercentage}%)\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))\n          ) : (\n            <div className=\"p-4 text-center text-gray-500\">No results found</div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SearchBar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}